{"version":3,"file":"branch_modification.js","sources":["../../../../apps/shopee_open_api/shopee_open_api/public/js/branch.js","../../../../apps/shopee_open_api/shopee_open_api/public/js/branch_list.js"],"sourcesContent":["frappe.ui.form.on('Branch', {\n    refresh: function(frm) {\n        if (frm.doc.shopee_shop_id) {\n            frm.add_custom_button('Disconnect from shopee', () => {\n                frappe.call({\n                    method: \"shopee_open_api.auth.get_unauthorize_url\",\n                    callback: function(r) {\n                        let unauthorizeUrl = r['message'];\n                        window.open(unauthorizeUrl, \"_self\");\n                    }\n                })\n            })\n        }\n    }\n});","frappe.listview_settings[\"Branch\"] = {\n\n\tonload: function(listview) {\n\t\tthis.add_button([\"Add shopee as a new branch\"], \"default\", function() { \n\t\t\t// can I add something here?\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"shopee_open_api.auth.get_authorize_url\",\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tlet authorizeUrl = r['message'];\n\t\t\t\t\twindow.open(authorizeUrl, \"_self\");\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t},\n\n\tadd_button(name, type, action, wrapper_class=\".page-actions\") {\n\t\tconst button = document.createElement(\"button\");\n\t\tbutton.classList.add(\"btn\", \"btn-\" + type, \"btn-sm\", \"ml-2\");\n\t\tbutton.innerHTML = name;\n\t\tbutton.onclick = action;\n\t\tdocument.querySelector(wrapper_class).prepend(button);\n\t},\n};"],"names":["let","const"],"mappings":";;;IAAA,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE;QACxB,OAAO,EAAE,SAAS,GAAG,EAAE;YACnB,IAAI,GAAG,CAAC,GAAG,CAAC,cAAc,EAAE;gBACxB,GAAG,CAAC,iBAAiB,CAAC,wBAAwB,cAAK;oBAC/C,MAAM,CAAC,IAAI,CAAC;wBACR,MAAM,EAAE,0CAA0C;wBAClD,QAAQ,EAAE,SAAS,CAAC,EAAE;4BAClBA,IAAI,cAAc,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;4BAClC,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;yBACxC;qBACJ,EAAC;iBACL,EAAC;aACL;SACJ;KACJ,CAAC;;ICdF,MAAM,CAAC,iBAAiB,CAAC,QAAQ,CAAC,GAAG;;KAEpC,MAAM,EAAE,SAAS,QAAQ,EAAE;MAC1B,IAAI,CAAC,UAAU,CAAC,CAAC,4BAA4B,CAAC,EAAE,SAAS,EAAE,WAAW;;OAErE,MAAM,CAAC,IAAI,CAAC;QACX,MAAM,EAAE,wCAAwC;QAChD,QAAQ,EAAE,SAAS,CAAC,EAAE;SACrBA,IAAI,YAAY,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;SAChC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;SACnC;QACD,EAAC;OACF,EAAC;MACF;;KAED,+BAAU,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,aAA6B,EAAE;mDAAlB,CAAC;;MAC5CC,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;MAChD,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,GAAG,IAAI,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;MAC7D,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC;MACxB,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC;MACxB,QAAQ,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;MACtD;KACD;;;;"}